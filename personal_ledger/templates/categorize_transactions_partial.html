    <form action="{{ url_for(".transactions_bulk_create") }}" method="post" id="transactions_form">
    <input type="submit" />
    <input type="hidden" name="num_columns" value="{{ select_columns.__len__() if select_columns }}" />
    <input type="hidden" name="num_transactions" value="{{ pairs.__len__() }}" />
    <select id="source_account_id" name="source_account_id"></select>
  {% if lines %}
<table class="table table-striped table-bordered">
  {% if select_columns %}
  <tr>
    {% for selection in select_columns %}
    <th><select id='selection_{{ loop.index - 1 }}' name='selection_{{ loop.index - 1 }}' ></select>
    </th>
    {% endfor %}
    <th></th>
  </tr>
  {% endif %}
  {% for line, select_expense in pairs %}
      {% set outer_loop = loop %}
  <tr id="row_{{ loop.index - 1}}">
    {% for item in line %}
    <td>{{ item }}<input type="hidden" value="{{ item }}" name="cell_{{ outer_loop.index - 1 }}_{{ loop.index - 1 }}" /></td>
    {% endfor %}
    <td>
      <select id='select_expenses_{{ loop.index - 1 }}' name='select_expenses_{{ loop.index - 1 }}'></select>
    <a id="add_rule_for_{{ loop.index - 1 }}" class="btn" type="button">Add Rule</a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endif %}
</form>


    <div class="modal fade" id="add_rule">
        <div class="modal-header">

        </div>
        <div class="modal-body">
            Hello, world!
        </div>
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
        </div>
    </div>

